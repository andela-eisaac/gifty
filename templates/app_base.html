{% load staticfiles %}
<!DOCTYPE html>
<html>
	<head>
		<title>gifty</title>
		<meta charset='utf-8'>
		<link rel="stylesheet" type="text/css" href="{% static 'lib/materialize/css/materialize.css' %}">
		<link rel="stylesheet" type="text/css" href="{% static 'stylesheets/main.css' %}">
	</head>

	<body>
		<header>
			{% if user.is_authenticated %}
				<nav id = "first-nav">
			    	<div class="nav-wrapper">
				      	<ul class="left hide-on-med-and-down">
							<li><a href="#">MY WISH LIST</a></li>
							<li><a href="#">MY ACCOUNT</a></li>
							<li><a href="#">MY CART</a></li>
							<li><a href="#">CHECKOUT</a></li>
						</ul>
				      	<ul id="nav-mobile" class="right hide-on-med-and-down">
				      		<ul id="dropdown2" class="dropdown-content">
					        	<li><a href="{% url 'logout' %}">Logout</a></li>
					      	</ul>

				        	<li><a href="#!" data-activates="dropdown2" class="dropdown">{{user.username}}<i class="mdi-navigation-arrow-drop-down right"></i></a></li>
					        <li><a href="#"><i class="mdi-action-add-shopping-cart"></i><span> Shopping Cart - 1</span></a></li>
				      	</ul>
			    	</div>
			  	</nav>
			{% endif %}
			

			<nav id="second-nav">
		    	<div class="nav-wrapper">
			      	<a href="{% url 'home' %}" class="brand-logo">
			      		<img src="{% static 'img/logo.jpg' %}" class="app-logo">
			      	</a>
					      

			      	<ul id="nav-mobile" class="right hide-on-med-and-down">
			      		<li>
			      			<form>
			      				<div class="search-div">
						        	<input type="text" id="search-bar">
						        	<a class="waves-effect waves-light btn search-button white-text">Search</a>
					        	</div>
					      	</form>
			      		</li>
			        	<li><a href="{% url 'home' %}">Home</a></li>
			        	{% if not user.is_authenticated %}
			        		<li><a href="#">Sign Up</a></li>
			        		<li><a href="#loginModal" class="modal-trigger">Login</a></li>
			        	{% endif %}
			        	<li><a href="#">FAQ</a></li>
			      	</ul>
		    	</div>
		  	</nav>
		</header>

		<div>
			<!-- Modal Structure -->
			<div id="loginModal" class="modal modal-fixed-footer">
			  	<div class="modal-content">
			    	{% if form.errors %}
			    		<p class="error">Sorry, Username or Password is incorrect</p>
			    	{% endif %}

			    	<form action="{% url 'login' %}" method="POST">{% csrf_token %}
			    		<div>
				    		<div class="input-field">
					    		<label for="username">Username</label>
					    		<input type="text" id="username" name="username">
				    		</div>

				    		<div class="input-field">
					    		<label for="password">Password</label>
					    		<input type="password" id="password" name="password">
				    		</div>

				    		<div class="input-field">
				    			<input type="hidden" id="token" name="csrfmiddlewaretoken" value="{{request.COOKIES.csrftoken}}">
				    		</div>

				    		<button type="submit" class="login-button">Login</button>
			    		</div>
			    	</form>
			  	</div>
			  	<div class="modal-footer">
			    	<a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Agree</a>
			  	</div>
			</div>
		</div>

		<section>
			<main>
				{% block content %}
	    
				{% endblock content %}
			</main>

			<footer>
				This is the footer
			</footer>
		</section>



		<script type="text/javascript" src="{% static 'lib/jquery-2.1.3.js' %}"></script>
		<script type="text/javascript" src="{% static 'lib/materialize/js/materialize.js' %}"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				$('.dropdown').dropdown({
			      	inDuration: 300,
			      	outDuration: 225,
			      	constrain_width: false, // Does not change width of dropdown to that of the activator
			      	hover: false, // Activate on click
			      	alignment: 'left', // Aligns dropdown to left or right edge (works with constrain_width)
			      	gutter: 0, // Spacing from edge
			      	belowOrigin: false // Displays dropdown below the button
				});

				$('.modal-trigger').leanModal({
			      	dismissible: true, // Modal can be dismissed by clicking outside of the modal
			      	opacity: .5, // Opacity of modal background
			      	in_duration: 300, // Transition in duration
			      	out_duration: 200, // Transition out duration
			      	// ready: function() { alert('Ready'); }, // Callback for Modal open
			      	// complete: function() { alert('Closed'); } // Callback for Modal close
			    });
			});
		</script>
	</body>